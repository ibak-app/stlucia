<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DEV: Image Gallery | St. Lucia Business Guide</title>
  <meta name="robots" content="noindex, nofollow">
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',system-ui,sans-serif;background:#0d1117;color:#c9d1d9;line-height:1.5;padding:20px}
    h1{font-size:1.4rem;color:#58a6ff;margin-bottom:4px}
    .subtitle{color:#8b949e;font-size:.85rem;margin-bottom:20px}
    .stats{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px}
    .stat{background:#161b22;border:1px solid #30363d;border-radius:8px;padding:10px 16px;font-size:.8rem}
    .stat b{color:#58a6ff;font-size:1.1rem;display:block}
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:20px;align-items:center}
    .controls input,.controls select{background:#0d1117;border:1px solid #30363d;color:#c9d1d9;padding:8px 12px;border-radius:6px;font-size:.85rem}
    .controls input{flex:1;min-width:200px}
    .controls select{min-width:140px}
    .controls button{background:#21262d;border:1px solid #30363d;color:#c9d1d9;padding:8px 14px;border-radius:6px;cursor:pointer;font-size:.8rem}
    .controls button:hover{background:#30363d}
    .controls button.active{background:#1f6feb;border-color:#1f6feb;color:#fff}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px}
    .card{background:#161b22;border:1px solid #30363d;border-radius:10px;overflow:hidden;transition:border-color .2s}
    .card:hover{border-color:#58a6ff}
    .card.unused{border-color:#f85149;opacity:.7}
    .card.unused .badge-unused{display:inline-block}
    .badge-unused{display:none;background:#f85149;color:#fff;font-size:.65rem;padding:2px 6px;border-radius:4px;margin-left:6px}
    .card-img{width:100%;height:200px;object-fit:cover;background:#21262d;display:block;cursor:pointer}
    .card-img.loading{background:linear-gradient(90deg,#21262d 25%,#30363d 50%,#21262d 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
    @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
    .card-body{padding:12px}
    .card-file{font-family:'Cascadia Code',monospace;font-size:.78rem;color:#79c0ff;word-break:break-all}
    .card-meta{font-size:.72rem;color:#8b949e;margin-top:4px;display:flex;gap:8px;flex-wrap:wrap}
    .card-meta span{background:#21262d;padding:2px 6px;border-radius:4px}
    .card-alt{font-size:.75rem;color:#8b949e;margin-top:6px;font-style:italic;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .card-pages{margin-top:6px;display:flex;gap:4px;flex-wrap:wrap}
    .card-pages a{font-size:.68rem;background:#1f6feb22;color:#58a6ff;padding:2px 8px;border-radius:4px;text-decoration:none;border:1px solid #1f6feb44}
    .card-pages a:hover{background:#1f6feb44}
    .card-pages a.tr{background:#23812622;color:#3fb950;border-color:#3fb95044}
    .section-label{font-size:.7rem;color:#8b949e;margin-top:8px;text-transform:uppercase;letter-spacing:.5px}
    .lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:999;cursor:zoom-out}
    .lightbox.open{display:flex}
    .lightbox img{max-width:95vw;max-height:90vh;border-radius:8px;box-shadow:0 0 40px rgba(0,0,0,.5)}
    .lightbox .lb-info{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);background:#161b22;padding:8px 16px;border-radius:8px;font-size:.8rem;color:#c9d1d9;white-space:nowrap}
    .empty{text-align:center;color:#8b949e;padding:60px 20px;font-size:.9rem}
    @media(max-width:600px){.grid{grid-template-columns:1fr}.controls{flex-direction:column}}
  </style>
</head>
<body>

<h1>Image Gallery (Dev)</h1>
<p class="subtitle">All images used in the St. Lucia Business Guide &mdash; not linked in app navigation</p>

<div class="stats" id="stats"></div>

<div class="controls">
  <input type="text" id="search" placeholder="Search filename, alt text, or page...">
  <select id="filterPage">
    <option value="">All Pages</option>
  </select>
  <select id="filterCat">
    <option value="">All Categories</option>
  </select>
  <select id="filterType">
    <option value="">All Types</option>
  </select>
  <select id="sortBy">
    <option value="name">Sort: Name</option>
    <option value="size-desc">Sort: Size (largest)</option>
    <option value="size-asc">Sort: Size (smallest)</option>
    <option value="refs-desc">Sort: Most Used</option>
    <option value="refs-asc">Sort: Least Used</option>
  </select>
  <button id="btnUnused">Show Unused Only</button>
</div>

<div class="grid" id="grid"></div>
<div class="empty" id="empty" style="display:none">No images match your filters.</div>

<div class="lightbox" id="lightbox">
  <img src="" alt="">
  <div class="lb-info"></div>
</div>

<script>
const IMAGE_DATA = [
  {f:"Beausejour_Stadium_Cricket_St_Lucia.jpg",kb:236,cat:"misc",type:"section",alt:"Daren Sammy National Cricket Stadium, Gros Islet, Saint Lucia",en:["events.html"],tr:["events.html"]},
  {f:"business-bpo-office.jpg",kb:28,cat:"business",type:"float-right",alt:"Business process outsourcing office in Castries, Saint Lucia",en:["business.html"],tr:["business.html"]},
  {f:"business-castries-district.jpg",kb:93,cat:"business",type:"section",alt:"Castries business district in Saint Lucia",en:["business.html","faq.html"],tr:["business.html","faq.html"]},
  {f:"business-eccb-building.webp",kb:45,cat:"business",type:"float-right",alt:"Eastern Caribbean Central Bank headquarters",en:["business.html"],tr:["business.html"]},
  {f:"business-investment-meeting.jpg",kb:41,cat:"business",type:"section",alt:"Business investment meeting in Saint Lucia",en:["business.html"],tr:["business.html"]},
  {f:"business-mobile-payment.webp",kb:20,cat:"business",type:"float-right",alt:"Mobile payment digital wallet",en:[],tr:[]},
  {f:"business-mobile-wallet-pennypinch.png",kb:70,cat:"business",type:"float-right",alt:"Penny Pinch mobile wallet app",en:[],tr:[]},
  {f:"business-penny-pinch-wallet.jpg",kb:17,cat:"business",type:"float-right",alt:"Penny Pinch mobile wallet, a Saint Lucia fintech success story",en:["business.html"],tr:["business.html"]},
  {f:"card-directory.jpg",kb:207,cat:"card",type:"card",alt:"Castries waterfront",en:["directory.html","index.html"],tr:["directory.html","index.html"]},
  {f:"card-legal.jpg",kb:37,cat:"card",type:"card",alt:"Legal documents and gavel",en:["index.html"],tr:["index.html"]},
  {f:"card-map.jpg",kb:81,cat:"card",type:"card",alt:"Saint Lucia map",en:["index.html"],tr:["index.html"]},
  {f:"card-overview.jpg",kb:137,cat:"card",type:"card",alt:"Saint Lucia coastline aerial view",en:["index.html"],tr:["index.html"]},
  {f:"card-sectors.jpg",kb:139,cat:"card",type:"card",alt:"Saint Lucia banana plantation",en:["index.html"],tr:["index.html"]},
  {f:"card-trade.jpg",kb:109,cat:"card",type:"card",alt:"Caribbean shipping port",en:["index.html"],tr:["index.html"]},
  {f:"castries-central-market.jpg",kb:49,cat:"misc",type:"float-right",alt:"Castries Central Market, a historic landmark in Saint Lucia",en:["overview.html","trade.html"],tr:["overview.html","trade.html"]},
  {f:"cbi-citizenship-investment.jpg",kb:63,cat:"cbi",type:"section",alt:"Citizenship by investment programme",en:[],tr:[]},
  {f:"cbi-passport.webp",kb:30,cat:"cbi",type:"card",alt:"Caribbean passport and travel documents",en:["cbi.html","index.html"],tr:["cbi.html","index.html"]},
  {f:"cbi-realestate.jpg",kb:44,cat:"cbi",type:"float-right",alt:"Caribbean luxury villa investment property",en:["cbi.html"],tr:["cbi.html"]},
  {f:"cbi-sovereign-wealth.jpg",kb:43,cat:"cbi",type:"float-right",alt:"Saint Lucia Sovereign Wealth Fund and national investment management",en:["cbi.html"],tr:["cbi.html"]},
  {f:"cbi-stlucia-aerial-investment.jpg",kb:41,cat:"cbi",type:"float-right",alt:"Aerial view of Saint Lucia coastline, a prime citizenship by investment destination",en:["cbi.html"],tr:["cbi.html"]},
  {f:"cbi-stlucia-passport.webp",kb:37,cat:"cbi",type:"float-right",alt:"Saint Lucia passport obtained through citizenship by investment",en:["cbi.html"],tr:["cbi.html"]},
  {f:"checklist-business-planning.png",kb:21,cat:"checklist",type:"section",alt:"Business planning and strategy for investing in Saint Lucia",en:["checklist.html"],tr:["checklist.html"]},
  {f:"checklist-compliance.webp",kb:24,cat:"checklist",type:"float-right",alt:"Business compliance and regulatory requirements in Saint Lucia",en:["checklist.html"],tr:["checklist.html"]},
  {f:"checklist-entity-formation.jpg",kb:27,cat:"checklist",type:"float-right",alt:"Company registration at the Registry of Companies, Saint Lucia",en:["checklist.html"],tr:["checklist.html"]},
  {f:"event-carnival.jpg",kb:165,cat:"misc",type:"card",alt:"Saint Lucia Carnival parade celebration",en:["events.html","index.html"],tr:["events.html","index.html"]},
  {f:"events-carnival-stlucia.jpg",kb:83,cat:"events",type:"float-right",alt:"Saint Lucia Carnival parade celebrations",en:["events.html"],tr:["events.html"]},
  {f:"events-creole-food.jpg",kb:39,cat:"events",type:"float-right",alt:"Saint Lucian Creole cuisine and cultural food",en:["events.html"],tr:["events.html"]},
  {f:"events-gros-islet-party.jpg",kb:201,cat:"events",type:"section",alt:"Gros Islet Friday night street party, Saint Lucia",en:["events.html"],tr:["events.html"]},
  {f:"events-jazz-festival.jpg",kb:149,cat:"events",type:"section",alt:"Jazz and music festival performance in the Caribbean",en:["events.html"],tr:["events.html"]},
  {f:"events-jazz-stlucia.jpg",kb:45,cat:"events",type:"float-right",alt:"Saint Lucia Jazz and Arts Festival performance",en:["events.html"],tr:["events.html"]},
  {f:"events-julien-alfred.jpg",kb:23,cat:"events",type:"float-right",alt:"Julien Alfred, Saint Lucia Olympic gold medallist sprinter",en:["events.html"],tr:["events.html"]},
  {f:"events-sailing-caribbean.jpg",kb:30,cat:"events",type:"float-right",alt:"Sailing and yachting in Caribbean waters",en:["events.html"],tr:["events.html"]},
  {f:"expats-community-social.jpg",kb:32,cat:"expats",type:"float-right",alt:"Expat community social gathering",en:[],tr:[]},
  {f:"expats-driving-caribbean.jpg",kb:38,cat:"expats",type:"float-right",alt:"Driving in the Caribbean",en:[],tr:[]},
  {f:"expats-driving-stlucia-road.jpg",kb:57,cat:"expats",type:"section",alt:"Scenic mountain road driving in Saint Lucia",en:["expats.html"],tr:["expats.html"]},
  {f:"expats-healthcare-okeu.jpg",kb:81,cat:"expats",type:"float-right",alt:"Owen King EU Hospital (OKEU), the main public hospital in Castries, Saint Lucia",en:["expats.html"],tr:["expats.html"]},
  {f:"expats-healthcare.jpg",kb:30,cat:"expats",type:"float-right",alt:"Healthcare in the Caribbean",en:[],tr:[]},
  {f:"expats-rodney-bay-village.jpg",kb:64,cat:"expats",type:"float-right",alt:"Rodney Bay Village, the main entertainment and dining hub for expats in Saint Lucia",en:["expats.html","faq.html","resources.html"],tr:["expats.html","faq.html","resources.html"]},
  {f:"government-house-stlucia.jpg",kb:197,cat:"government",type:"section",alt:"Government House, official residence of the Governor-General of Saint Lucia",en:["government.html"],tr:["government.html"]},
  {f:"hero-business.jpg",kb:57,cat:"hero",type:"hero-bg",alt:"Caribbean business meeting",en:["business.html","index.html","startups.html"],tr:["business.html","index.html","startups.html"]},
  {f:"hero-cbi.jpg",kb:84,cat:"hero",type:"hero-bg",alt:"Immigration",en:["cbi.html","index.html","realestate.html"],tr:["cbi.html","index.html","realestate.html"]},
  {f:"hero-checklist.jpg",kb:25,cat:"hero",type:"card",alt:"Business planning checklist",en:["checklist.html","index.html"],tr:["checklist.html","index.html"]},
  {f:"hero-events.jpg",kb:108,cat:"hero",type:"hero-bg",alt:"Events and culture",en:["events.html"],tr:["events.html"]},
  {f:"hero-faq.jpg",kb:110,cat:"hero",type:"card",alt:"Castries Central Market",en:["faq.html","index.html"],tr:["faq.html","index.html"]},
  {f:"hero-legal.jpg",kb:70,cat:"hero",type:"hero-bg",alt:"Legal framework",en:["immigration.html","legal.html"],tr:["immigration.html","legal.html"]},
  {f:"hero-living.jpg",kb:281,cat:"hero",type:"hero-bg",alt:"Saint Lucia lifestyle for remote workers",en:["expats.html","index.html","living.html"],tr:["expats.html","index.html","living.html"]},
  {f:"hero-overview.jpg",kb:137,cat:"hero",type:"hero-bg",alt:"Saint Lucia overview",en:["overview.html"],tr:["overview.html"]},
  {f:"hero-pitons.jpg",kb:171,cat:"hero",type:"hero-bg",alt:"The Pitons, Saint Lucia",en:["checklist.html","directory.html","events.html","faq.html","government.html","index.html","liked.html","living.html","map.html","resources.html","trade.html"],tr:["directory.html","events.html","faq.html","government.html","index.html","liked.html","living.html","map.html","resources.html"]},
  {f:"hero-resources.webp",kb:80,cat:"hero",type:"hero-bg",alt:"Reference resources and documents",en:["index.html","resources.html"],tr:["index.html","resources.html"]},
  {f:"hero-sectors.jpg",kb:201,cat:"hero",type:"hero-bg",alt:"Saint Lucia luxury resort beach",en:["sectors.html"],tr:["sectors.html"]},
  {f:"hero-trade.jpg",kb:103,cat:"hero",type:"hero-bg",alt:"International trade",en:["trade.html"],tr:["trade.html"]},
  {f:"hewanorra-airport-new.jpg",kb:50,cat:"misc",type:"float-right",alt:"Hewanorra International Airport terminal expansion, Saint Lucia",en:["immigration.html"],tr:["immigration.html"]},
  {f:"hewanorra-airport.jpg",kb:44,cat:"misc",type:"inline",alt:"Hewanorra International Airport, Saint Lucia",en:["overview.html"],tr:["overview.html"]},
  {f:"immigration-department-stlucia.jpg",kb:46,cat:"immigration",type:"float-right",alt:"Immigration Department of Saint Lucia office",en:["immigration.html"],tr:["immigration.html"]},
  {f:"immigration-digital-nomad.jpg",kb:138,cat:"immigration",type:"section",alt:"Digital nomad working remotely from a Caribbean beach",en:["immigration.html"],tr:["immigration.html"]},
  {f:"immigration-passport-control.jpg",kb:48,cat:"immigration",type:"section",alt:"Passport control at immigration",en:[],tr:[]},
  {f:"immigration-residence-permit.jpg",kb:25,cat:"immigration",type:"float-right",alt:"Residence permit documents",en:[],tr:[]},
  {f:"immigration-work-permit.jpg",kb:28,cat:"immigration",type:"section",alt:"Work permit and employment visa processing, Saint Lucia",en:["immigration.html"],tr:["immigration.html"]},
  {f:"legal-castries-market-workers.jpg",kb:58,cat:"legal",type:"section",alt:"Workers and vendors at Castries Central Market, Saint Lucia",en:["legal.html"],tr:["legal.html"]},
  {f:"legal-courthouse-caribbean.jpg",kb:210,cat:"legal",type:"section",alt:"First District Court, Peynier Street, Castries, Saint Lucia",en:["legal.html"],tr:["legal.html"]},
  {f:"legal-eccb-office-castries.jpg",kb:23,cat:"legal",type:"float-right",alt:"Eastern Caribbean Central Bank agency office in Castries, Saint Lucia",en:["legal.html"],tr:["legal.html"]},
  {f:"legal-employment-contract.jpg",kb:78,cat:"legal",type:"section",alt:"Employment contract signing",en:[],tr:[]},
  {f:"legal-financial-regulation.jpg",kb:22,cat:"legal",type:"float-right",alt:"Financial regulation documents",en:[],tr:[]},
  {f:"legal-property-caribbean.jpg",kb:78,cat:"legal",type:"float-right",alt:"Caribbean property and real estate",en:["faq.html","legal.html"],tr:["faq.html","legal.html"]},
  {f:"legal-tax-accounting.jpg",kb:19,cat:"legal",type:"float-right",alt:"Inland Revenue Department tax documentation, Saint Lucia",en:["legal.html"],tr:["legal.html"]},
  {f:"living-education-classroom.jpg",kb:124,cat:"living",type:"section",alt:"Classroom and education in Saint Lucia",en:["living.html"],tr:["living.html"]},
  {f:"living-electricity-solar.jpg",kb:62,cat:"living",type:"float-right",alt:"Solar electricity infrastructure",en:[],tr:[]},
  {f:"living-food.jpg",kb:72,cat:"living",type:"inline",alt:"Castries Market tropical fruits and produce",en:["living.html"],tr:["living.html"]},
  {f:"living-housing.jpg",kb:40,cat:"living",type:"card",alt:"Saint Lucia villa",en:["index.html","living.html"],tr:["index.html","living.html"]},
  {f:"living-lucelec-plant.jpg",kb:50,cat:"living",type:"float-right",alt:"LUCELEC power plant, Saint Lucia's electricity provider",en:["living.html"],tr:["living.html"]},
  {f:"living-lucelec-solar-farm.jpg",kb:64,cat:"living",type:"float-right",alt:"LUCELEC solar farm, part of Saint Lucia's renewable energy expansion",en:["living.html"],tr:["living.html"]},
  {f:"living-solar-panels-stlucia.png",kb:111,cat:"living",type:"float-right",alt:"Solar panels in Saint Lucia",en:[],tr:[]},
  {f:"living-st-jude-hospital-new.jpg",kb:86,cat:"living",type:"section",alt:"St. Jude Hospital reconstruction",en:[],tr:[]},
  {f:"living-telecom-tower.jpg",kb:16,cat:"living",type:"float-right",alt:"FLOW and Digicel telecommunications infrastructure in Saint Lucia",en:["living.html"],tr:["living.html"]},
  {f:"living-transport-bus.jpg",kb:55,cat:"living",type:"section",alt:"Colourful minibus public transport in Saint Lucia",en:["living.html"],tr:["living.html"]},
  {f:"living-victoria-hospital.jpg",kb:27,cat:"living",type:"float-right",alt:"Victoria Hospital in Castries, Saint Lucia",en:["living.html"],tr:["living.html"]},
  {f:"marigot-bay-resort.jpg",kb:59,cat:"misc",type:"float-right",alt:"Marigot Bay resort, a popular expat area in Saint Lucia",en:["expats.html"],tr:["expats.html"]},
  {f:"overview-ec-dollar-currency.jpg",kb:56,cat:"overview",type:"float-right",alt:"Eastern Caribbean dollar (EC$) banknote, the official currency of Saint Lucia",en:["overview.html","resources.html"],tr:["overview.html","resources.html"]},
  {f:"overview-economy-gdp.jpg",kb:33,cat:"overview",type:"float-right",alt:"Economy GDP chart",en:[],tr:[]},
  {f:"overview-hewanorra-new-terminal.jpg",kb:19,cat:"overview",type:"float-right",alt:"Hewanorra Airport new terminal",en:[],tr:[]},
  {f:"overview-rodney-bay-aerial.jpg",kb:158,cat:"overview",type:"section",alt:"Aerial view of Rodney Bay, Saint Lucia",en:["overview.html"],tr:["overview.html"]},
  {f:"overview-walcott-square.jpg",kb:87,cat:"overview",type:"float-right",alt:"Derek Walcott Square in Castries, Saint Lucia",en:["overview.html"],tr:["overview.html"]},
  {f:"pitons-landscape.jpg",kb:191,cat:"misc",type:"section",alt:"The Pitons, Saint Lucia UNESCO World Heritage Site",en:["overview.html"],tr:["overview.html"]},
  {f:"port-castries-cruise.jpg",kb:59,cat:"port",type:"section",alt:"Port Castries cruise terminal, Saint Lucia",en:["trade.html"],tr:["trade.html"]},
  {f:"port-castries.jpg",kb:36,cat:"port",type:"inline",alt:"Port of Castries with cruise ships",en:["overview.html"],tr:["overview.html"]},
  {f:"realestate-construction.jpg",kb:40,cat:"realestate",type:"float-right",alt:"Tropical building construction and development",en:["realestate.html"],tr:["realestate.html"]},
  {f:"realestate-luxury-resort.jpg",kb:139,cat:"realestate",type:"section",alt:"Luxury Caribbean resort villa development",en:["realestate.html"],tr:["realestate.html"]},
  {f:"realestate-property-financing.jpg",kb:37,cat:"realestate",type:"float-right",alt:"Property financing and mortgage options in Saint Lucia",en:["realestate.html"],tr:["realestate.html"]},
  {f:"realestate-sugar-beach.jpg",kb:154,cat:"realestate",type:"section",alt:"Sugar Beach resort between the Pitons, Saint Lucia",en:["realestate.html"],tr:["realestate.html"]},
  {f:"realestate-villa-pitons.jpg",kb:50,cat:"realestate",type:"float-right",alt:"Luxury villa with Pitons view in Saint Lucia",en:["realestate.html"],tr:["realestate.html"]},
  {f:"resources-stlucia-tourism.jpg",kb:44,cat:"resources",type:"section",alt:"Saint Lucia Tourism Authority promotional material",en:["resources.html"],tr:["resources.html"]},
  {f:"resources-tourism-travel.jpg",kb:56,cat:"resources",type:"section",alt:"Tourism and travel resources",en:[],tr:[]},
  {f:"rodney-bay-marina.jpg",kb:43,cat:"misc",type:"float-right",alt:"Rodney Bay Marina, Saint Lucia",en:["expats.html"],tr:["expats.html"]},
  {f:"sector-agriculture.jpg",kb:75,cat:"sector",type:"inline",alt:"Saint Lucia cocoa and chocolate production",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-banana-plantation.jpg",kb:57,cat:"sector",type:"float-right",alt:"Banana plantation in Saint Lucia",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-cocoa-farm.jpg",kb:61,cat:"sector",type:"float-right",alt:"Cocoa farm and chocolate production in Saint Lucia",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-energy.jpg",kb:62,cat:"sector",type:"inline",alt:"Solar panels in Caribbean tropical setting",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-fishing-anse-la-raye.jpg",kb:141,cat:"sector",type:"section",alt:"Fishing boats on the beach at Anse La Raye, Saint Lucia",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-maritime.jpg",kb:43,cat:"sector",type:"inline",alt:"Yachts at Rodney Bay Marina",en:[],tr:["sectors.html"]},
  {f:"sector-pigeon-island-landmark.jpg",kb:20,cat:"sector",type:"inline",alt:"Pigeon Island National Landmark, Saint Lucia",en:[],tr:["sectors.html"]},
  {f:"sector-sulphur-springs.jpg",kb:120,cat:"sector",type:"section",alt:"Sulphur Springs volcano, Soufriere, Saint Lucia",en:["sectors.html"],tr:["sectors.html"]},
  {f:"sector-technology.jpg",kb:41,cat:"sector",type:"inline",alt:"BPO call center in the Caribbean",en:["sectors.html"],tr:["sectors.html"]},
  {f:"soufriere-pitons-town.jpg",kb:76,cat:"misc",type:"section",alt:"Soufriere town with view of the Pitons, Saint Lucia",en:["overview.html"],tr:["overview.html"]},
  {f:"startups-coworking.webp",kb:35,cat:"startups",type:"float-right",alt:"Coworking and innovation space in Saint Lucia",en:["startups.html"],tr:["startups.html"]},
  {f:"startups-ecommerce.jpg",kb:54,cat:"startups",type:"section",alt:"E-commerce and digital shopping in the Eastern Caribbean",en:["startups.html"],tr:["startups.html"]},
  {f:"startups-entrepreneurs.jpg",kb:163,cat:"startups",type:"section",alt:"Startup entrepreneurs meeting in the Caribbean",en:["startups.html"],tr:["startups.html"]},
  {f:"startups-incubator.jpg",kb:40,cat:"startups",type:"float-right",alt:"BOOST business incubator programme, Saint Lucia",en:["startups.html"],tr:["startups.html"]},
  {f:"startups-youth-entrepreneurship.jpg",kb:41,cat:"startups",type:"float-right",alt:"Youth Enterprise Agency (YEA) training programme, Saint Lucia",en:["startups.html"],tr:["startups.html"]},
  {f:"trade-caricom-leaders.jpg",kb:52,cat:"trade",type:"section",alt:"CARICOM Heads of Government meeting, Caribbean regional cooperation",en:["trade.html"],tr:["trade.html"]},
  {f:"trade-caricom.jpg",kb:144,cat:"trade",type:"section",alt:"CARICOM trade cooperation",en:[],tr:[]},
  {f:"trade-castries-port-cargo.webp",kb:62,cat:"trade",type:"section",alt:"Port of Castries cargo terminal and container shipping, Saint Lucia",en:["trade.html"],tr:["trade.html"]},
  {f:"trade-free-zone.jpg",kb:65,cat:"trade",type:"float-right",alt:"Free trade zone warehouse",en:[],tr:[]},
  {f:"trade-oecs-headquarters.jpg",kb:30,cat:"trade",type:"float-right",alt:"OECS headquarters",en:[],tr:[]},
  {f:"trade-shipping-port.jpg",kb:38,cat:"trade",type:"section",alt:"Shipping port containers",en:[],tr:[]},
  {f:"trade-vieux-fort-aerial.jpg",kb:48,cat:"trade",type:"float-right",alt:"Aerial view of Vieux Fort industrial and free trade zone area, Saint Lucia",en:["trade.html"],tr:["trade.html"]}
];

// --- Rendering ---
const grid = document.getElementById('grid');
const empty = document.getElementById('empty');
const statsEl = document.getElementById('stats');
const searchEl = document.getElementById('search');
const filterPage = document.getElementById('filterPage');
const filterCat = document.getElementById('filterCat');
const filterType = document.getElementById('filterType');
const sortBy = document.getElementById('sortBy');
const btnUnused = document.getElementById('btnUnused');
const lightbox = document.getElementById('lightbox');
let unusedOnly = false;

// Populate filter options
const pages = new Set();
const cats = new Set();
const types = new Set();
IMAGE_DATA.forEach(img => {
  img.en.forEach(p => pages.add(p));
  img.tr.forEach(p => pages.add('tr/' + p));
  cats.add(img.cat);
  types.add(img.type);
});
[...pages].sort().forEach(p => {
  const o = document.createElement('option');
  o.value = p; o.textContent = p;
  filterPage.appendChild(o);
});
[...cats].sort().forEach(c => {
  const o = document.createElement('option');
  o.value = c; o.textContent = c;
  filterCat.appendChild(o);
});
[...types].sort().forEach(t => {
  const o = document.createElement('option');
  o.value = t; o.textContent = t;
  filterType.appendChild(o);
});

// Stats
function updateStats(filtered) {
  const total = IMAGE_DATA.length;
  const unused = IMAGE_DATA.filter(i => i.en.length === 0 && i.tr.length === 0).length;
  const totalKB = IMAGE_DATA.reduce((s, i) => s + i.kb, 0);
  const filteredKB = filtered.reduce((s, i) => s + i.kb, 0);
  statsEl.innerHTML = `
    <div class="stat"><b>${total}</b>Total Images</div>
    <div class="stat"><b>${(totalKB/1024).toFixed(1)} MB</b>Total Size</div>
    <div class="stat"><b>${total - unused}</b>In Use</div>
    <div class="stat"><b style="color:#f85149">${unused}</b>Unused</div>
    <div class="stat"><b>${filtered.length}</b>Showing</div>
    <div class="stat"><b>${(filteredKB/1024).toFixed(1)} MB</b>Filtered Size</div>
  `;
}

function render() {
  const q = searchEl.value.toLowerCase();
  const fp = filterPage.value;
  const fc = filterCat.value;
  const ft = filterType.value;
  const sort = sortBy.value;

  let data = IMAGE_DATA.filter(img => {
    if (unusedOnly && (img.en.length > 0 || img.tr.length > 0)) return false;
    if (q && !img.f.toLowerCase().includes(q) && !img.alt.toLowerCase().includes(q) &&
        !img.en.some(p => p.includes(q)) && !img.tr.some(p => p.includes(q))) return false;
    if (fc && img.cat !== fc) return false;
    if (ft && img.type !== ft) return false;
    if (fp) {
      const isTr = fp.startsWith('tr/');
      const page = isTr ? fp.replace('tr/', '') : fp;
      if (isTr ? !img.tr.includes(page) : !img.en.includes(page)) return false;
    }
    return true;
  });

  // Sort
  if (sort === 'size-desc') data.sort((a, b) => b.kb - a.kb);
  else if (sort === 'size-asc') data.sort((a, b) => a.kb - b.kb);
  else if (sort === 'refs-desc') data.sort((a, b) => (b.en.length + b.tr.length) - (a.en.length + a.tr.length));
  else if (sort === 'refs-asc') data.sort((a, b) => (a.en.length + a.tr.length) - (b.en.length + b.tr.length));
  else data.sort((a, b) => a.f.localeCompare(b.f));

  updateStats(data);

  if (data.length === 0) {
    grid.innerHTML = '';
    empty.style.display = 'block';
    return;
  }
  empty.style.display = 'none';

  grid.innerHTML = data.map(img => {
    const isUnused = img.en.length === 0 && img.tr.length === 0;
    const allPages = [
      ...img.en.map(p => `<a href="${p}" target="_blank">${p}</a>`),
      ...img.tr.map(p => `<a href="tr/${p}" target="_blank" class="tr">tr/${p}</a>`)
    ].join('');
    return `
      <div class="card${isUnused ? ' unused' : ''}">
        <img class="card-img" src="assets/images/${img.f}" alt="${img.alt}" loading="lazy"
             onclick="openLightbox('assets/images/${img.f}','${img.f} (${img.kb}KB)')">
        <div class="card-body">
          <div class="card-file">${img.f}<span class="badge-unused">UNUSED</span></div>
          <div class="card-meta">
            <span>${img.kb} KB</span>
            <span>${img.cat}</span>
            <span>${img.type}</span>
            <span>${img.en.length + img.tr.length} refs</span>
          </div>
          ${img.alt ? `<div class="card-alt">${img.alt}</div>` : ''}
          ${allPages ? `<div class="section-label">Pages</div><div class="card-pages">${allPages}</div>` : ''}
        </div>
      </div>
    `;
  }).join('');
}

// Lightbox
function openLightbox(src, info) {
  lightbox.querySelector('img').src = src;
  lightbox.querySelector('.lb-info').textContent = info;
  lightbox.classList.add('open');
}
lightbox.onclick = () => lightbox.classList.remove('open');
document.addEventListener('keydown', e => { if (e.key === 'Escape') lightbox.classList.remove('open'); });

// Events
searchEl.oninput = render;
filterPage.onchange = render;
filterCat.onchange = render;
filterType.onchange = render;
sortBy.onchange = render;
btnUnused.onclick = () => {
  unusedOnly = !unusedOnly;
  btnUnused.classList.toggle('active', unusedOnly);
  render();
};

render();
</script>
</body>
</html>
